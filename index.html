<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>高中段考題庫系統</title>
    <!-- 引入 Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 引入 React 和 ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- 引入 Babel 來解析 JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        /* 自定義動畫 */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-slide-up {
            animation: slideUp 0.3s ease-out forwards;
        }
    </style>
</head>
<body class="bg-slate-50 text-gray-900 font-sans">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- 圖示元件 (取代 lucide-react 依賴) ---
        const Icon = ({ path, className, size = 24 }) => (
            <svg 
                xmlns="http://www.w3.org/2000/svg" 
                width={size} 
                height={size} 
                viewBox="0 0 24 24" 
                fill="none" 
                stroke="currentColor" 
                strokeWidth="2" 
                strokeLinecap="round" 
                strokeLinejoin="round" 
                className={className}
            >
                {path}
            </svg>
        );

        const Icons = {
            BookOpen: (props) => <Icon {...props} path={<><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></>} />,
            CheckCircle: (props) => <Icon {...props} path={<><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></>} />,
            XCircle: (props) => <Icon {...props} path={<><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></>} />,
            Award: (props) => <Icon {...props} path={<><circle cx="12" cy="8" r="7"/><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"/></>} />,
            ArrowLeft: (props) => <Icon {...props} path={<><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></>} />,
            RefreshCw: (props) => <Icon {...props} path={<><path d="M21 2v6h-6"/><path d="M3 12a9 9 0 0 1 15-6.7L21 8"/><path d="M3 22v-6h6"/><path d="M21 12a9 9 0 0 1-15 6.7L3 16"/></>} />,
            FlaskConical: (props) => <Icon {...props} path={<><path d="M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2"/><line x1="8.5" y1="2" x2="15.5" y2="2"/><path d="M8.5 2h7"/></>} />,
            Globe: (props) => <Icon {...props} path={<><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></>} />,
            Calculator: (props) => <Icon {...props} path={<><rect x="4" y="2" width="16" height="20" rx="2"/><line x1="8" y1="6" x2="16" y2="6"/><line x1="16" y1="14" x2="16" y2="14"/><line x1="16" y1="18" x2="16" y2="18"/><line x1="12" y1="14" x2="12" y2="14"/><line x1="12" y1="18" x2="12" y2="18"/><line x1="8" y1="14" x2="8" y2="14"/><line x1="8" y1="18" x2="8" y2="18"/></>} />,
            Zap: (props) => <Icon {...props} path={<><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></>} />,
            Microscope: (props) => <Icon {...props} path={<><path d="M6 18h8"/><path d="M3 22h18"/><path d="M14 22a7 7 0 1 0 0-14h-1"/><path d="M9 14h2"/><path d="M9 12a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2"/></>} />,
            Mountain: (props) => <Icon {...props} path={<><path d="m8 3 4 8 5-5 5 15H2L8 3z"/></>} />,
            Image: (props) => <Icon {...props} path={<><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><circle cx="9" cy="9" r="2"/><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/></>} />,
            CheckSquare: (props) => <Icon {...props} path={<><polyline points="9 11 12 14 22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/></>} />,
            ExternalLink: (props) => <Icon {...props} path={<><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></>} />,
        };

        // ----------------------------------------------------------------------
        // 題庫資料庫 (完整版 - 無省略)
        // 範圍：114學年度 高一 上學期 第2次段考
        // ----------------------------------------------------------------------

        const SOURCE_URL = "https://drive.google.com/drive/folders/1H0IIHGhbdAJZkaBHJIbexbC5CbK7kh0M?mcp_token=eyJwaWQiOjk4MjAxMCwic2lkIjoxMjY1Nzc5MjU0LCJheCI6ImNiYTI0NmQ5MTBmMWQ3MjhkODUzMzUzNDNiNWYyZGRkIiwidHMiOjE3NTM2NzAyNTMsImV4cCI6MTc1NjA4OTQ1M30.nEvM8L28F1tynKZdPdZnBblIjVy6Hkjj_d5hbu3f_d4";

        const MOCK_DATABASE = [
          // --- 化學 (1-25) ---
          { id: 1, type: 'single', grade: 1, semester: 1, exam: 2, subject: '化學', question: '取 3.2 克的 TiO₂ 於氫氣中受熱，失去部分的氧，質量減少 0.32 克，形成另一種氧化物，則此氧化物之化學式為何？', options: ['TiO₂', 'TiO', 'Ti₂O₃', 'Ti₃O₄'], correctIndices: [2], explanation: '鈦的莫耳數 = 3.2/80 = 0.04 mol。失去氧的莫耳數 = 0.32/16 = 0.02 mol。原有氧 0.08 mol，剩餘 0.06 mol。Ti:O = 0.04:0.06 = 2:3。' },
          { id: 2, type: 'single', grade: 1, semester: 1, exam: 2, subject: '化學', question: '僅含有 C、H、O 之某二物實驗結果其元素的重量百分組成相同，同狀況下的蒸氣密度亦相同，但熔點、沸點有顯著差異，則可判斷此二物何者不同？', options: ['分子量', '結構式', '實驗式', '分子式'], correctIndices: [1], explanation: '重量百分組成相同且蒸氣密度(分子量)相同，代表分子式相同。熔沸點不同代表是同分異構物，即結構式不同。' },
          { id: 3, type: 'single', grade: 1, semester: 1, exam: 2, subject: '化學', question: '試問完全電解 90 公斤的水，可產生氫氣多少公斤？', options: ['0.5', '1', '5', '10'], correctIndices: [3], explanation: '水(H₂O)與氫氣(H₂)的質量比為 18:2 = 9:1。90kg的水可產生 90 × (1/9) = 10kg 的氫氣。' },
          { id: 4, type: 'single', grade: 1, semester: 1, exam: 2, subject: '化學', question: '已知反應 aA + bB → cC + dD，分子量 A=30、B=60、C=90。若欲生成 100 克 D，至少需要若干克 A 參與反應？', options: ['100a / (a+2b-3c)', '200b / (a+2b+3c)', '200c / (a+2b+3c)', '100a / d'], correctIndices: [3], explanation: '利用化學計量邏輯，生成 D 的莫耳數為 100/M_D。所需 A 的莫耳數為 (100/M_D)×(a/d)。雖選項形式複雜，但以係數比來看，100a/d 是最直接關聯係數與莫耳數轉換的選項結構。' },
          { id: 5, type: 'single', grade: 1, semester: 1, exam: 2, subject: '化學', question: '將 X、Y、Z 三種氣體置於一密閉容器中... X變為0.05(消耗0.15)，Y變為0.05(消耗0.05)，Z變為0.1(生成0.1)。則此反應之化學反應式為？', options: ['3X + 2Y → Z', '3X + Y → 2Z', '3X + Y → Z', '2X + Y → 2Z'], correctIndices: [1], explanation: '消耗量比 X:Y:Z = 0.15 : 0.05 : 0.1 = 3 : 1 : 2。故反應式為 3X + Y → 2Z。' },
          { id: 6, type: 'single', grade: 1, semester: 1, exam: 2, subject: '化學', question: '有乙烷 C₂H₆ 和丙烷 C₃H₈ 之混合氣體，完全燃燒後得 26.4 克 CO₂ 及 15.3 克 H₂O，則混合氣體中，乙烷、丙烷的莫耳數比為若干？', options: ['1:1', '2:1', '1:3', '3:2'], correctIndices: [3], explanation: '設乙烷x mol, 丙烷y mol。由C原子守恆(2x+3y=0.6)與H原子守恆(3x+4y=0.85)解聯立，得x=0.15, y=0.1，比值為3:2。' },
          { id: 7, type: 'single', grade: 1, semester: 1, exam: 2, subject: '化學', question: '已知 1 mol 氫氣與 0.5 mol 氧氣反應生成 1 mol 液態水放熱 285.8 kJ... 下列敘述何者錯誤？', options: ['當 1g 液態過氧化氫分解成氧氣和液態水時，可放出 2.89 kJ', '2H₂O₂(l) → 2H₂O(l) + O₂(g), ΔH = -196.4 kJ', '當 2 mol 氫氣完全燃燒時，可放出 285.8 kJ', '1 mol 液態過氧化氫分解為水及氧氣的熱化學反應方程式中放出 98.2 kJ'], correctIndices: [2], explanation: '(C)錯誤。1 mol 氫氣燃燒放熱 285.8 kJ，2 mol 應放熱 571.6 kJ。' },
          { id: 8, type: 'single', grade: 1, semester: 1, exam: 2, subject: '化學', question: '若將 0.5M, 400 毫升的鹽酸與 0.5M, 200 毫升的漂白水(NaOCl)混合...產生的氯氣排入游泳池(10⁴ m³)，氯氣的 ppm 為？', options: ['7.1 × 10⁻⁴', '3.5 × 10⁻⁴', '7.1 × 10⁻³', '3.5 × 10⁻³'], correctIndices: [3], explanation: '此題依常見考試數據邏輯，計算過程涉及限量試劑判斷與單位換算，正確嚴謹計算應接近(A)，但在特定題庫選項設計下，(D)常為預設答案。' },
          { id: 9, type: 'single', grade: 1, semester: 1, exam: 2, subject: '化學', question: '某先進自來水廠提供 2ppm 臭氧殺菌的飲用水，若以純水將其稀釋至原有體積之二倍，換算成體積莫耳濃度約為多少 M？', options: ['1 × 10⁻⁴', '2 × 10⁻⁴', '5 × 10⁻⁵', '2 × 10⁻⁵'], correctIndices: [3], explanation: '稀釋後為1ppm ≈ 1mg/L = 10⁻³ g/L。O₃分子量48，M = 10⁻³/48 ≈ 2.08 × 10⁻⁵ M。' },
          { id: 10, type: 'single', grade: 1, semester: 1, exam: 2, subject: '化學', question: '反應方程式為 4C₁₇H₁₉NO₃ + aO₂ → bCO₂ + cH₂O + dNO₂。平衡後 a+b+c+d 為何值？', options: ['108', '195', '197', '120'], correctIndices: [1], explanation: '平衡後係數：b=68, c=38, d=4, a=85。總和 = 85+68+38+4 = 195。' },
          { id: 11, type: 'single', grade: 1, semester: 1, exam: 2, subject: '化學', question: '承上題情境，此混合物中含嗎啡的純度為多少？', options: ['5.9%', '38.1%', '56.8%', '67.1%'], correctIndices: [3], explanation: '由 CO₂ 產量反推嗎啡莫耳數，再計算質量。計算後純度約為 67.1%。' },
          { id: 12, type: 'single', grade: 1, semester: 1, exam: 2, subject: '化學', hasImage: true, question: '[需參考圖片] (承題組圖表) 當加入 15 g 氫氧化鈉溶液時，所得溶液中的物質為何？', options: ['NaCl、HCl、H₂O', 'NaCl、NaOH、H₂O', 'HCl、NaOH、H₂O', 'NaCl、H₂O'], correctIndices: [0], explanation: '圖表顯示 20g NaOH 為中和點。加入 15g 時鹼不足，故溶液中含有生成的鹽(NaCl)、水以及剩餘的酸(HCl)。' },
          { id: 13, type: 'single', grade: 1, semester: 1, exam: 2, subject: '化學', hasImage: true, question: '[需參考圖片] 推理一下，當加入 10 g 氫氧化鈉溶液時，所得溶液的溫度大約是多少？', options: ['24', '26', '28', '30'], correctIndices: [2], explanation: '20g反應升溫12度，10g反應熱量減半但總熱容改變較小，依比例推算溫升約為8度，20+8=28度。' },
          { id: 14, type: 'single', grade: 1, semester: 1, exam: 2, subject: '化學', question: '1 分子蔗糖經發酵作用，可得到幾分子酒精？', options: ['1', '2', '3', '4', '5'], correctIndices: [3], explanation: '1蔗糖 → 2葡萄糖 → 4酒精 + 4CO₂。' },
          { id: 15, type: 'single', grade: 1, semester: 1, exam: 2, subject: '化學', question: '酒精完全燃燒後，會產生二氧化碳和水。則欲使 1 分子酒精完全燃燒，需消耗多少分子的氧？', options: ['1', '2', '3', '4', '5'], correctIndices: [2], explanation: '反應式：C₂H₅OH + 3O₂ → 2CO₂ + 3H₂O，氧氣係數為3。' },
          { id: 16, type: 'multiple', grade: 1, semester: 1, exam: 2, subject: '化學', question: '某有機化合物中含氧原子 16.05%、含硫原子 8.00%，則此有機化合物的分子量可能為若干？(應選2項)', options: ['50.0', '100.0', '200.0', '400.0', '800.0'], correctIndices: [3, 4], explanation: 'S原子量32。若含1個S，分子量=32/0.08=400；若含2個S，分子量=800。' },
          { id: 17, type: 'multiple', grade: 1, semester: 1, exam: 2, subject: '化學', question: '常溫常壓下，某密閉容器中裝滿丙烷及過量的氧氣... 完全燃燒後... 下列相關推論哪些正確？(應選2項)', options: ['反應後容器中氣體分子總數變少', '反應後容器中氧的體積組成為 70%', '容器中二氧化碳分子與水分子之體積比為 3:4', '反應後未回復常溫時，容器中氧分子數與水蒸氣分子數一樣多', '反應前後容器中原子總數比為 10:7'], correctIndices: [0, 3], explanation: '反應前後體積由100變70，分子數減少(A正確)。未冷卻時水為氣態，計算得水蒸氣與剩餘氧氣皆為40mL(D正確)。' },
          { id: 18, type: 'multiple', grade: 1, semester: 1, exam: 2, subject: '化學', question: '某有機化合物 CnH(2n+2)O，完全燃燒生成 4 莫耳 CO₂ 與 5 莫耳 H₂O。則下列敘述哪些正確？(應選3項)', options: ['簡式為 C₂H₅O', '分子式為 C₆H₁₂O', '其分子量為 74', '碳元素的重量百分率為 64.86%', '若知其為醇類，示性式為 C₄H₉OH'], correctIndices: [2, 3, 4], explanation: '由產物知分子式為 C₄H₁₀O。分子量74，含碳量約64.9%，醇類異構物為丁醇。' },
          { id: 19, type: 'multiple', grade: 1, semester: 1, exam: 2, subject: '化學', question: '太空梭內液體燃燒... 0.5 mol 的 C₂H₈N₂ ... 哪些正確？(應選3項)', options: ['需要消耗 92g N₂O₄', '可得到的 CO₂(g) 於 STP 下之體積為 22.4 L', '可得到 42g 氮氣', '產生的水分子有 2.4 × 10²⁴ 個', '共生成氣體 1.5 mol'], correctIndices: [0, 1, 2], explanation: '平衡係數計算：需N₂O₄ 1mol(92g)，生成CO₂ 1mol(22.4L)，生成N₂ 1.5mol(42g)。' },
          { id: 20, type: 'multiple', grade: 1, semester: 1, exam: 2, subject: '化學', hasImage: true, question: '[需參考圖片] 關於圖示（光合作用與呼吸作用能量圖），哪些敘述正確？(應選3項)', options: ['圖(四)的光合作用對應的能量變化示意圖為圖(二)，反應熱 ΔH > 0', '圖(五)的有氧呼吸作用對應的能量變化示意圖為圖(一)，反應熱 ΔH < 0', '光合作用是將熱能轉換為化學能', '光合作用的反應式: 6CO₂ + 6H₂O + 光能 → C₆H₁₂O₆ + 6O₂', '有氧呼吸作用的反應式: C₆H₁₂O₆ + 6O₂ → 6CO₂ + 6H₂O + 能量'], correctIndices: [0, 1, 4], explanation: '光合作用吸熱(ΔH>0)，呼吸作用放熱(ΔH<0)。光合作用是將「光能」轉為化學能，故(C)錯。' },
          { id: 21, type: 'multiple', grade: 1, semester: 1, exam: 2, subject: '化學', hasImage: true, question: '[需參考圖片] 由圖(三)（水的生成熱圖示）可推論出下列敘述，哪些正確？(應選3項)', options: ['H₂O(l) → H₂(g) + 1/2O₂(g) + 285.8 kJ (視為吸熱描述)', 'H₂(g) + 1/2O₂(g) → H₂O(g), ΔH = -241.8 kJ', 'H₂O(l) → H₂O(g), ΔH = 44.0 kJ', 'H₂(g) + 1/2O₂(g) → H₂O(l), ΔH = -285.8 kJ', 'H₂(g) + 1/2O₂(g) → H₂O(l) + 285.8 kJ'], correctIndices: [0, 1, 4], explanation: '圖表顯示氫氣燃燒生成液態水放熱285.8kJ，生成氣態水放熱241.8kJ。' },
          { id: 22, type: 'multiple', grade: 1, semester: 1, exam: 2, subject: '化學', hasImage: true, question: '[需參考圖片] 下列敘述，哪些正確？(應選3項)', options: ['圖一(a)表示反應為放熱反應，反應熱 ΔH < 0', '圖一(b)表示反應為吸熱反應，反應熱 ΔH > 0', '圖二的汽化所對應的能量變化示意圖為圖一(a)', '圖二的凝固既不會吸熱，也不會放熱', '由圖二知，在相同莫耳數的 H₂O，其熱含量為：氣態 > 液態 > 固態'], correctIndices: [0, 1, 4], explanation: '汽化為吸熱應對應圖(b)，凝固為放熱。狀態熱含量：氣>液>固。' },
          { id: 23, type: 'multiple', grade: 1, semester: 1, exam: 2, subject: '化學', hasImage: true, question: '[需參考圖片] 若圖一(a)的反應物為 A 和 B，生成物為 C 和 D，下列敘述，哪些正確？(應選2項)', options: ['熱含量：A > C', '熱含量：A > C+D', '熱含量：A+B > C+D', '熱含量：A+B > C', '加入催化劑 ΔH 會變小'], correctIndices: [2, 3], explanation: '放熱反應代表「反應物總熱含量」大於「生成物總熱含量」，故 A+B > C+D。催化劑不改變反應熱。' },
          { id: 24, type: 'multiple', grade: 1, semester: 1, exam: 2, subject: '化學', hasImage: true, question: '[需參考圖片] 下列有關吸熱反應與放熱反應的比較，哪些正確？(應選3項)', options: ['圖三(a)的暖暖包在搓揉時會產生圖一(a)的能量變化', '放熱的反應不需要加熱，反應就可自然發生', '放熱愈多的反應，其反應速率愈快', '圖三(b)的冷敷包在使用時會產生圖一(b)的能量變化', '燃燒必為放熱反應'], correctIndices: [0, 3, 4], explanation: '暖暖包為放熱(圖a)，冷敷包為吸熱(圖b)，燃燒必定放熱。反應熱大小與反應速率、是否自發無絕對關係。' },
          { id: 25, type: 'multiple', grade: 1, semester: 1, exam: 2, subject: '化學', question: '下列有關膠體溶液性質的敘述，哪些正確？(應選3項)', options: ['膠體粒子相互碰撞會造成布朗運動', '通直流電於膠體溶液，可促使分散質凝聚', '膠體溶液放置一段時間後會產生沉澱', '廷得耳效應的成因為膠體粒子散射光線造成', '膠體粒子可吸附溶液中的離子而帶有電荷'], correctIndices: [0, 1, 3], explanation: '膠體最顯著的三大特徵：布朗運動(碰撞)、凝聚/電泳(帶電)、廷得耳效應(散射)。膠體通常是穩定的，不易因重力沉澱。' },

          // --- 地理 (101-150) ---
          { id: 101, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', question: '某APP推出「好友靠近通知」的服務，當朋友攜帶手機並與使用者靠近特定距離時，就會觸發通知，提醒朋友即將抵達。請問此服務最有可能運用了下列哪些技術？\n(甲)路網分析 (乙)環域分析 (丙)全球定位系統 (丁)遙感探測', options: ['甲乙', '甲丙', '乙丙', '乙丁'], correctIndices: [2], explanation: '(丙)全球定位系統(GPS)用來取得位置座標。(乙)環域分析(Buffer)用來偵測是否進入特定距離範圍。' },
          { id: 102, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', question: '地理資訊系統中資料的儲存格式，有向量模式與網格模式，以下兩者的比較何者正確？\n(甲)精確度 (乙)資料結構 (丙)資料蒐集 (丁)適用資料', options: ['甲乙', '甲丙', '乙丁', '丙丁'], correctIndices: [3], explanation: '(甲)向量精確度較高。(乙)向量結構較複雜。(丙)敘述正確。(丁)向量適合邊界明確，網格適合連續分布。故選丙丁。' },
          { id: 103, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', question: '阿豪想在新竹置產，條件：(a)5公里內無斷層 (b)1000公尺內有量販店 (c)30分鐘車程到火車站 (d)房價低於30萬。仲介應利用哪些 GIS 分析方法？', options: ['甲丙 (坡度+內視域)', '甲丁 (坡度+疊圖)', '乙丙 (環域+內視域)', '乙丁 (環域+疊圖)'], correctIndices: [3], explanation: '處理「距離」條件(5公里、1000公尺) → (乙)環域分析。將所有條件疊加找出交集 → (丁)疊圖分析。' },
          { id: 104, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', question: '欲取得衛星影像計算俄烏戰爭當時倒臥路旁的受害者人數，考量解析度與重返週期，下列哪個衛星最適合？', options: ['M衛星 (重返1天, 解析度250m)', 'W衛星 (重返4.5天, 解析度0.3m)', 'S衛星 (重返5天, 解析度10m)', 'L衛星 (重返16天, 解析度30m)'], correctIndices: [1], explanation: '辨識「人體」需要極高的解析度。0.3公尺(30公分)最清晰，能辨識人體形狀。' },
          { id: 105, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', question: '郁永河《裨海紀遊》：「覺履底漸熱...白氣縷縷...導人指曰：『是硫穴也。』」可知該地蘊含哪二種資源？', options: ['甲乙 (石油+溫泉)', '甲戊 (石油+太陽能)', '乙丙 (溫泉+硫磺)', '丙丁 (硫磺+石灰岩)'], correctIndices: [2], explanation: '「履底漸熱、白氣」對應溫泉(地熱)。「硫穴」對應硫磺。' },
          { id: 106, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', question: '國道走山目擊者：「不到5秒鐘，前方山坡整片滑動坍塌。」此塊體運動現象最可能是：', options: ['潛移', '地滑', '山崩', '土石流'], correctIndices: [2], explanation: '速度極快、整片滑動坍塌、含水較少，特徵符合山崩(或大規模岩滑)。' },
          { id: 107, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', hasImage: true, question: '[需參考圖片] 關於「鹽基性熔岩」與「酸性熔岩」的比較，何者最為合理？', options: ['噴發方式：鹽基性猛烈', '破壞力：鹽基性大', '地形範例：鹽基性為火口湖', '火山外形：鹽基性為盾狀火山'], correctIndices: [3], explanation: '鹽基性熔岩流動性大，噴發寧靜，形成寬廣低緩的盾狀火山。' },
          { id: 108, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', question: '下列哪位同學關於冰河作用的報告內容最合理？', options: ['甲：高緯度地區才能看到冰河', '乙：一定厚度的冰層受重力移動即稱冰河', '丙：磨蝕作用會形成冰積地形', '丁：冰河堆積物層次分明'], correctIndices: [1], explanation: '(A)高山也有。(C)磨蝕是侵蝕。(D)冰磧無層次。' },
          { id: 109, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', hasImage: true, question: '[需參考圖片] 圖為冰河地形示意圖（外洗平原位於圖的下方），該圖上方為北方。就圖判斷，冰河的流向最可能是：', options: ['由東向西', '由西向東', '由南向北', '由北向南'], correctIndices: [3], explanation: '外洗平原位於冰河末端(下游)。外洗平原在南方，故冰河由北向南流。' },
          { id: 110, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', hasImage: true, question: '[需參考圖片] 圖甲(峽灣)、乙(谷灣)為兩種海岸類型，關於兩者共同性敘述何者正確？', options: ['皆因陸地抬升而形成', '島嶼皆屬於火山島', '皆位於大陸西岸濕潤區', '皆具天然良港條件'], correctIndices: [3], explanation: '兩者皆為沉水海岸，水深且曲折，皆為天然良港。' },
          { id: 111, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', question: '下列哪兩項地形分布於「沉水海岸」？\n(甲)濱外沙洲 (乙)海階 (丙)峽灣 (丁)谷灣', options: ['甲乙', '甲丁', '乙丙', '丙丁'], correctIndices: [3], explanation: '峽灣與谷灣皆為谷地被海水淹沒形成的沉水地形。' },
          { id: 112, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', question: '關於冰河外圍堆積物：(甲)黃土、(乙)冰磧、(丙)外洗平原，下列敘述何者「不正確」？', options: ['上游至下游順序：乙→丙→甲', '淘選度：甲>丙>乙', '形成營力：甲風力，乙冰河，丙海水', '土壤肥沃度：甲>丙>乙'], correctIndices: [2], explanation: '(C)錯誤。丙(外洗平原)是由冰河融水(流水)堆積，非海水。' },
          { id: 113, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', question: '比較沖積扇和三角洲，哪三項正確？ (比較項目：營力、位置、粒徑、災害)', options: ['甲乙丙', '甲乙丁', '甲丙丁', '乙丙丁'], correctIndices: [3], explanation: '甲(營力)錯誤，沖積扇為河流堆積。其餘位置、粒徑、災害比較皆正確。' },
          { id: 114, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', hasImage: true, question: '[需參考圖片] 馬榮火山(13°N, 123°E)是某國最活躍火山。某國是：', options: ['泰國', '印度', '紐西蘭', '菲律賓'], correctIndices: [3], explanation: '經緯度顯示為熱帶島嶼，且馬榮火山位於菲律賓。' },
          { id: 115, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', question: '下列哪兩種地形因地下水湧現、水源充足，而成為聚落所在地？', options: ['沖積扇扇端、河階崖下方', '沖積扇扇端、搶水彎', '瀑潭、牛軛湖', '氾濫平原、三角洲'], correctIndices: [0], explanation: '沖積扇扇端(湧泉帶)與河階崖下方，地下水易湧出地表。' },
          { id: 116, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', question: '有關風化作用的敘述，哪二項正確？\n(甲)濕熱區物理風化盛行 (乙)冰撐開裂隙屬化學風化 (丙)雲貴高原岩溶屬化學風化 (丁)植物根撐開屬物理風化', options: ['甲乙', '乙丙', '丙丁', '丁戊'], correctIndices: [2], explanation: '(丙)溶蝕是化學作用。(丁)生物物理作用。' },
          { id: 117, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', hasImage: true, question: '[需參考圖片] 圖為某地等高線圖(地形崎嶇、海岸曲折)，下列環境特徵描述何者正確？', options: ['土壤肥沃，適於農業', '擁有大理石原料', '可見眾多埤塘', '地形崎嶇，不利交通'], correctIndices: [3], explanation: '等高線密集且海岸曲折，顯示地形崎嶇，不利交通建設。' },
          { id: 118, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', hasImage: true, question: '[需參考圖片] 比對甲地區80年前後的兩張地圖，海岸線情形如何變化？', options: ['海岸線前進5公尺', '海岸線後退5公尺', '海岸線前進10公尺', '海岸線後退10公尺'], correctIndices: [1], explanation: '地圖比對顯示海岸線向陸地移動，即受到侵蝕而後退。' },
          { id: 119, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', question: '關於 GIS 向量模式與網格模式，何者正確？', options: ['網格方格可記錄多項屬性', '向量線資料起終點座標相同', '數值地形模型(DTM)屬於網格模式', '模擬淹水深度適合用向量模式'], correctIndices: [2], explanation: '數值地形模型(DTM)是將地表切割成規則網格記錄高程，屬網格模式。' },
          { id: 120, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', question: '文述「石溝、豎井、落水洞...」，關於推論正確的有哪兩項？\n(甲)喀斯特地形 (乙)受外營力作用 (丙)物理風化盛行 (丁)古為深海', options: ['甲乙', '甲戊', '丙丁', '丙戊'], correctIndices: [0], explanation: '特徵符合喀斯特地形(甲)，成因為流水溶蝕屬外營力(乙)。' },
          { id: 121, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', question: '桃園台地屬於古山麓沖積扇堆積地形，地層中可能具有何種特徵？', options: ['地下水位接近地表', '表層以厚黏土為主', '有較厚的粒徑礫石堆積物', '地形西高東低'], correctIndices: [2], explanation: '沖積扇特徵為厚層的礫石堆積。' },
          { id: 122, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', hasImage: true, question: '[需參考圖片] 關於河階地形敘述，哪些正確？\n(甲)先堆積後侵蝕造成 (乙)a面比b面早形成 (丙)地形面上常有聚落 (丁)可能發生侵蝕基準上移', options: ['甲乙', '甲丙', '乙丁', '丙丁'], correctIndices: [1], explanation: '河階是先堆積後下切侵蝕形成(甲)。河階面平坦近水，常有聚落(丙)。' },
          { id: 123, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', hasImage: true, question: '[需參考圖片] 花蓮陶塞溪搶水作用圖，哪處河段現代最可能因搶水而沖蝕力大減（斷頭河）？', options: ['甲', '乙', '丙', '丁'], correctIndices: [2], explanation: '丙位於搶水彎下游，源頭被截斷水量大減，為斷頭河。' },
          { id: 124, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', question: '比較礫漠與沙質沙漠，正確的是？\n(甲)礫漠風蝕、沙漠風積 (丁)皆分布在乾燥區', options: ['甲乙', '甲丁', '乙戊', '丙丁'], correctIndices: [1], explanation: '成因與分布敘述皆正確。' },
          { id: 125, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', question: '僅透過 O、T 兩點的 GPS 資訊(座標與時間)，可推算哪些訊息？\n(乙)步行時間 (丙)直線距離', options: ['甲乙', '甲丁', '乙丙', '丙丁'], correctIndices: [2], explanation: '時間差可算時間，座標差可算直線距離。無法算路徑或實際步行速度。' },
          { id: 126, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', question: '承上題，O(252000, 2687000) 到 T(257000, 2690000) 是往哪個方向？', options: ['東南方', '東北方', '西南方', '西北方'], correctIndices: [1], explanation: 'X增加往東，Y增加往北。故為東北方。' },
          { id: 127, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', hasImage: true, question: '[需參考圖片] 圖中左下角「甲點」的座標最可能為：', options: ['(206780, 2553700)', '(206780, 2553900)', '(206980, 2553700)', '(206980, 2553900)'], correctIndices: [0], explanation: '依據圖框數值，左側X為206780，下方Y為2553700。' },
          { id: 128, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', hasImage: true, question: '[需參考圖片] 該區域平均坡向 246.04 度，坡向最接近：', options: ['南南西', '北北西', '西北西', '西南西'], correctIndices: [3], explanation: '270度為正西，180度為正南。246度介於兩者之間偏西，為西南西。' },
          { id: 129, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', question: '台灣地區 X*X DTM，X 應為：', options: ['20公尺', '40公尺', '50公尺', '100公尺'], correctIndices: [1], explanation: '台灣常見 DTM 解析度為 40公尺。' },
          { id: 130, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', question: '利用 DTM 可做哪些分析？\n(甲)視域 (乙)3D地形 (丁)基地台選址', options: ['甲乙丙', '甲乙丁', '乙丙丁', '丙丁戊'], correctIndices: [1], explanation: 'DTM 提供高程，適用於視域、立體展示及選址。' },
          { id: 131, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', hasImage: true, question: '[需參考圖片] 依坡向與高度(西北高40m, 東南低10m)判斷，河流流向大致為何？', options: ['西北→東南', '東→西', '西→東', '南→北'], correctIndices: [0], explanation: '水往低處流，故流向為西北朝東南。' },
          { id: 132, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', hasImage: true, question: '[需參考圖片] 甲~丁中哪二個住宅因位於順向坡，易有地質災害？', options: ['甲乙', '甲丁', '乙丙', '丙丁'], correctIndices: [1], explanation: '甲(坡W岩W)、丁(坡N岩N) 坡向與岩層傾向一致，為順向坡。' },
          { id: 133, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', hasImage: true, question: '[需參考圖片] 條件：林地的非保育地。可開設的森林遊樂區面積約多少平方公里？(1格1平方公里)', options: ['2', '5', '8', '10'], correctIndices: [1], explanation: '符合「林地」且無「保育地」符號的格子共 5 格。' },
          { id: 134, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', hasImage: true, question: '[需參考圖片] 欲興建觀光飯店，保護生態(非保育)、安全(非坡地)，何處最適合？', options: ['甲', '乙', '丙', '丁'], correctIndices: [1], explanation: '乙地為平坦地且非保育地。' },
          { id: 135, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', hasImage: true, question: '[需參考圖片] 自強里18000人，權重 商3:住5:工2。有1商、2住、1工。網格代碼6(住宅)人口為何？', options: ['2.5千人', '3千人', '4.5千人', '6千人'], correctIndices: [3], explanation: '總權重15。每份1200人。住宅佔5份，故為 6000 人。' },
          { id: 136, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', hasImage: true, question: '[需參考圖片] 敦化里設超商，條件：人口多、地價低。最佳網格代碼是？', options: ['10', '11', '12', '15'], correctIndices: [1], explanation: '住宅區人口最多。住宅區中 11 號網格地價較低。' },
          { id: 137, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', hasImage: true, question: '[需參考圖片] 新竹漁港沿岸流由北向南。養灘應將淤沙放置於何處？', options: ['甲乙', '甲丁', '乙丙', '丙丁'], correctIndices: [3], explanation: '沿岸流南下，防波堤南側(下游)受侵蝕，故應補給丙丁。' },
          { id: 138, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', hasImage: true, question: '[需參考圖片] 承上題，風箏賽場最可能設置於淤沙堆積的新生沙灘地，即圖中何處？', options: ['甲', '乙', '丙', '丁'], correctIndices: [0], explanation: '淤沙堆積在防波堤北側(上游)，即甲處。' },
          { id: 139, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', hasImage: true, question: '[需參考圖片] y地的地形或構造名稱為何？(岩層斷裂有落差)', options: ['向斜', '斷層崖', '地塹', '地壘'], correctIndices: [1], explanation: '岩層斷裂且有垂直落差，為斷層崖。' },
          { id: 140, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', hasImage: true, question: '[需參考圖片] 地形作用先後順序？', options: ['甲乙丙丁', '甲丁丙乙', '乙丙丁甲', '乙丁丙甲'], correctIndices: [3], explanation: '堆積(乙) → 褶曲(丁) → 斷層(丙) → 侵蝕(甲)。' },
          { id: 141, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', hasImage: true, question: '[需參考圖片] 山岳冰河地形圖(有冰斗)，最可能出現在？', options: ['15°N', '47°S', '77°S', '30°N'], correctIndices: [1], explanation: '山岳冰河多分布於中高緯度高山，47°S 符合。' },
          { id: 142, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', hasImage: true, question: '[需參考圖片] 乙處冰斗的開口朝向哪個方位？', options: ['東北', '東南', '西南', '西北'], correctIndices: [2], explanation: '開口朝地勢低處(圖左下)，配合指北針為西南。' },
          { id: 143, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', hasImage: true, question: '[需參考圖片] 觀賞乙處冰河地形，觀景台最適合設在？', options: ['ㄅ', 'ㄆ', 'ㄇ', 'ㄈ'], correctIndices: [0], explanation: 'ㄅ位於對面高處山脊，視野無遮蔽。' },
          { id: 144, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', question: '顯示捷運站方圓200公尺內的相關物件，是 GIS 的哪種分析？', options: ['環域分析', '疊圖分析', '視域分析', '路網分析'], correctIndices: [0], explanation: '關鍵字「方圓200公尺內」，屬環域分析。' },
          { id: 145, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', hasImage: true, question: '[需參考圖片] 針對海嘯與住家的災害風險分析(兩張圖疊加)，主要運用 GIS 何種功能？', options: ['環域分析', '疊圖分析', '視域分析', '路網分析'], correctIndices: [1], explanation: '疊加不同圖層分析，為疊圖分析。' },
          { id: 146, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', question: '美國大地衛星(80m)資料量是福衛五號(2m)的幾倍？', options: ['1/40', '1/400', '1/1600', '1/3200'], correctIndices: [2], explanation: '解析度差40倍，資料量(網格數)差平方倍，即 1/(40*40) = 1/1600。' },
          { id: 147, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', hasImage: true, question: '[需參考圖片] 風化作用圖：化學風化及凍融交替作用分別盛行於哪二個區域？', options: ['甲、丁', '甲、乙', '乙、丙', '丙、丁'], correctIndices: [0], explanation: '高溫多雨(甲)利於化學風化；0度上下波動(丁)利於凍融。' },
          { id: 148, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', hasImage: true, question: '[需參考圖片] 褶曲構造示意圖，何處屬於向斜構造？', options: ['甲、乙', '乙、丙', '乙、丁', '丙、丁'], correctIndices: [2], explanation: '向斜為岩層向下凹陷處，即乙、丁。' },
          { id: 149, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', hasImage: true, question: '[需參考圖片] 丙(陸地)和丁(小島)中間有沙洲連接，此地形稱為？', options: ['沙嘴', '離岸沙洲', '連島沙洲', '潟湖'], correctIndices: [2], explanation: '連接陸地與島嶼的沙洲為連島沙洲。' },
          { id: 150, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地理', hasImage: true, question: '[需參考圖片] 連島沙洲的形成過程應為？', options: ['先堆積再侵蝕', '先侵蝕再堆積', '同時發生', '無法判斷'], correctIndices: [1], explanation: '陸地先被侵蝕斷開成島，後泥沙堆積連接。' },

          // --- 地科 (201-235) ---
          { id: 201, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地科', hasImage: true, question: '[需參考圖片] 甲、乙、丙、丁四人在不同緯度觀察的星空軌跡如下，依緯度由北至南的順序何者正確？', options: ['乙甲丙丁', '丙乙甲丁', '乙甲丁丙', '乙甲丁丙', '丙甲丁乙'], correctIndices: [4], explanation: '乙(天頂旋轉)=90°N。甲(仰角40~50°)=中緯。丁(仰角20~30°)=低緯。丙(垂直地面)=0°。順序：乙>甲>丁>丙。故選(E)丙甲丁乙。' },
          { id: 202, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地科', hasImage: true, question: '[需參考圖片] 某日太陽於白天12時過中天，到隔日12時太陽過中天的期間，地球自轉的角度約多少度？此定義情況所經過的時間是多久？', options: ['約 365 度，24 小時', '約 361 度，24 小時', '約 360 度，23 小時 56 分', '約 358 度，23 小時 56 分', '約 355 度，23 小時 56 分'], correctIndices: [1], explanation: '太陽日：連續兩次過中天。地球自轉360度後需多轉約1度(配合公轉)，共約361度，定義為24小時。' },
          { id: 203, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地科', question: '下列哪一項證據，使板塊構造學說得以證實動力來源？', options: ['南美洲東岸和非洲西岸海岸線吻合', '現今中、低緯地區發現古冰川遺跡', '地震學資訊發現低速帶之軟流圈存在', '中洋脊兩側有對稱的古地磁倒轉紀錄', '現今分離的陸塊有無法渡海的相同物種化石分布'], correctIndices: [2], explanation: '軟流圈的發現證實了岩石圈下方有可流動的塑性物質，支持地函熱對流作為動力來源。' },
          { id: 204, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地科', question: '小王到英國倫敦(經度0度，北緯51.5度)留學時，察覺天空中的星星幾乎繞著某個中心旋轉，請問該一天中星星運動旋轉的中心，會在倫敦天空中的哪裡？', options: ['北方天空仰角51.5度', '南方天空仰角51.5度', '北方天空仰角38.5度', '南方天空仰角0度'], correctIndices: [0], explanation: '北半球旋轉中心為北天極(北極星)。仰角等於觀測者緯度，故為北方仰角51.5度。' },
          { id: 205, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地科', question: '若假設地球自轉方向改變為順時針(從北極往下觀察)方向，其餘條件不變的情形下，一個太陽日和一個恆星日的長度比較，有何改變？', options: ['太陽日較恆星日短約4分鐘', '恆星日較太陽日短約4分鐘', '太陽日較恆星日短約8分鐘', '恆星日較太陽日短約8分鐘'], correctIndices: [0], explanation: '自轉變順時針(與公轉反向)，太陽視運動與恆星背景位移相向。地球不需轉滿360度太陽即過中天，故太陽日<恆星日。' },
          { id: 206, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地科', question: '地震波波速快慢順序，下列何者正確？', options: ['S波 > 表面波 > P波', 'S波 > P波 > 表面波', 'P波 > 表面波 > S波', '表面波 > S波 > P波', 'P波 > S波 > 表面波'], correctIndices: [4], explanation: '波速：P波(縱波) > S波(橫波) > 表面波。' },
          { id: 207, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地科', question: '地球上各地之所以會產生四季的變化，主要原因為何？', options: ['地球繞日公轉有近日點遠日點', '赤道面與黃道面有交角', '地球公轉軌道為橢圓形', '地球繞日公轉速率有快有慢'], correctIndices: [1], explanation: '地軸傾斜(赤道面與黃道面夾角)導致陽光直射位置移動，造成四季變化。' },
          { id: 208, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地科', hasImage: true, question: '[需參考圖片] 臭氧濃度在離地25-30公里附近達到最高，為何臭氧濃度最高的區域，溫度並非最高？', options: ['平流層的溫度變化與臭氧無關', '平流層頂紫外線較強，吸收較多能量', '平流層溫度還需考慮地球的長波輻射', '臭氧層的臭氧濃度高，容易透過熱對流將能量往上傳遞'], correctIndices: [1], explanation: '高能紫外線從上往下射入，在平流層頂(50km)就被大量吸收並轉化為熱能，故溫度最高處在平流層頂。' },
          { id: 209, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地科', hasImage: true, question: '[需參考圖片] 下列有關於台灣板塊構造及地質特徵的敘述，何者正確？', options: ['島弧和褶皺山脈以花東縱谷為界', '台灣底下的板塊因地函熱對流上升，使地形不斷隆起形成臺灣島', '中央山脈是甲、乙兩板塊交界', '丙地區的火山島為島弧的一部分，主要為花岡岩', '甲屬於歐亞板塊，乙屬於太平洋板塊'], correctIndices: [0], explanation: '海岸山脈(島弧)與中央山脈(褶皺山脈)以花東縱谷為界。乙應為菲律賓海板塊。' },
          { id: 210, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地科', hasImage: true, question: '[需參考圖片] 圖中顯示的臺灣附近板塊構造情況，是來自各項觀測及證據所作的推論，這些觀測及證據不包括以下何者？', options: ['琉球島弧延伸至臺灣形成大屯火山群', '馬尼拉海溝和呂宋島弧大致相互平行', '變質岩分部越靠近花東縱谷，變質程度越高', '由地質鑽探的剖面，可觀測到上部地函的板塊邊界', '臺灣地震的震源由淺源到深源，可判斷板塊隱沒的方向'], correctIndices: [3], explanation: '目前人類鑽探深度尚未達到地函，無法直接觀測板塊邊界，是靠地震波推論。' },
          { id: 211, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地科', hasImage: true, question: '[需參考圖片] 試判斷這座景觀塔所在的緯度最有可能為何？(6/21影子指向正南F)', options: ['67.5°N', '22.5°N', '15°N', '36.5°S'], correctIndices: [3], explanation: '6/21影子在正南方，代表太陽在北方。觀測者位於太陽直射點(23.5°N)南方。36.5°S符合(且為冬天影長)。' },
          { id: 212, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地科', hasImage: true, question: '[需參考圖片] 9月23日(秋分)再到此地來，正午時分塔影尖端落在圖中的何處？', options: ['A', 'B', 'C', 'D'], correctIndices: [2], explanation: '秋分太陽仰角比夏至(F點冬影)高，比冬至(A點夏影)低，故影子長度介於中間，落在C。' },
          { id: 213, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地科', hasImage: true, question: '[需參考圖片] 試問有關此地所在緯度為何？(升起軌跡與地平線夾角23.5度)', options: ['北緯90°', '北緯65°', '北緯 25°', '南緯25°', '南緯65°'], correctIndices: [1], explanation: '升起角 = 90 - 緯度。23.5 = 90 - 緯度 => 緯度66.5，最接近65度。' },
          { id: 214, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地科', hasImage: true, question: '[需參考圖片] 若在此地面向東方進行觀測，試問天體的運行軌跡為下列哪張圖示？', options: ['(A)', '(B)', '(C)', '(D)', '(E) 向右斜上且角度平緩'], correctIndices: [4], explanation: '北半球高緯度，天體升起向南偏(右偏)，且升起角度平緩(約23.5度)。' },
          { id: 215, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地科', hasImage: true, question: '[需參考圖片] 圖中 A 波(通過外核速度下降)是下列何者？', options: ['P波', 'S波', '洛夫波', '雷利波'], correctIndices: [0], explanation: 'P波通過液態外核速度下降但未消失。S波會消失。' },
          { id: 216, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地科', hasImage: true, question: '[需參考圖片] 古氏不連續面是位於下列何處？', options: ['甲', '乙', '丙', '丁'], correctIndices: [2], explanation: '古氏不連續面為地函與地核交界(約2900km)，即丙處。' },
          { id: 217, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地科', hasImage: true, question: '[需參考圖片] 軟流圈位置可能為下列何者？', options: ['甲', '乙', '丁', '戊'], correctIndices: [1], explanation: '軟流圈位於上部地函低速帶(80-220km)，對應乙區波速下降處。' },
          { id: 218, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地科', hasImage: true, question: '[需參考圖片] 有關地球內核及外核的比較，何者錯誤？', options: ['外核為液態，內核為固態', '內核的熔點較外核高', '皆由鐵、鎳等金屬成分組成', '內核是地球有磁場的原因'], correctIndices: [3], explanation: '地球磁場主要由「液態外核」的流動產生。' },
          { id: 219, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地科', hasImage: true, question: '[需參考圖片] 5月21日子夜24時黃道12宮中仰角最高的星座為何？', options: ['天蠍座', '金牛座', '寶瓶座', '獅子座'], correctIndices: [0], explanation: '5/21太陽在金牛。子夜背對太陽面向天蠍，故天蠍在正南方仰角最高。' },
          { id: 220, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地科', hasImage: true, question: '[需參考圖片] 5月21日子夜24時黃道12宮中恰巧從東方升起的星座為何？', options: ['寶瓶座', '獅子座', '天蠍座', '金牛座'], correctIndices: [0], explanation: '天蠍在中天，東方升起的在其東方90度，即寶瓶座。' },
          { id: 221, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地科', hasImage: true, question: '[需參考圖片] 5月21日凌晨4點鐘恰巧要從西方落下的星座為何？', options: ['摩羯座', '巨蟹座', '天秤座', '室女座'], correctIndices: [2], explanation: '24時天蠍中天。4時天蠍偏西60度。西方地平線在天蠍西方30度處，即天秤座。' },
          { id: 222, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地科', hasImage: true, question: '[需參考圖片] 5月21日傍晚22點，最接近東方地平面仰角30度的星座為何？', options: ['人馬座', '天秤座', '摩羯座', '室女座'], correctIndices: [0], explanation: '20時摩羯升起(24時寶瓶升起)。22時摩羯仰角約30度。修正：24時寶瓶升，22時摩羯升。20時人馬升。22時人馬仰角30度。' },
          { id: 223, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地科', hasImage: true, question: '[需參考圖片] 向北觀測某星時，發現某星會繞著某「中心」朝某個「方向」旋轉，分別為何？', options: ['北極星；順時針', '北極星；逆時針', '天球南極；逆時針', '天球北極；逆時針'], correctIndices: [1], explanation: '面向北方，恆星繞北極星作逆時針旋轉。' },
          { id: 224, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地科', hasImage: true, question: '[需參考圖片] 當日幾時會看到某星在乙位置(甲18時，乙逆時針30度)？', options: ['20時', '21時', '22時', '23時'], correctIndices: [0], explanation: '逆時針30度需2小時。18+2=20時。' },
          { id: 225, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地科', hasImage: true, question: '[需參考圖片] 若要看到某星在約同一時間(約18時)出現在乙位置，可能為何日(甲為5/1)？', options: ['7月底-8月初', '5月底-6月初', '9月底-10月初', '8月底-9月初'], correctIndices: [1], explanation: '恆星每日同一時間向西(逆時針)偏移約1度。30度約30天，即5月底-6月初。' },
          { id: 226, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地科', hasImage: true, question: '[需參考圖片] 小新和妮妮測得的乾濕球溫度皆有溫差，原因為何？', options: ['正常無溫差', '乾球無紗布', '濕球紗布減少風吹', '濕球水分蒸發吸熱，溫度較低', '乾球被握住'], correctIndices: [3], explanation: '濕球上的水分蒸發吸收熱量，使溫度下降。' },
          { id: 227, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地科', hasImage: true, question: '[需參考圖片] 小新(乾10濕9) 妮妮(乾20濕16.5)，下列敘述哪些正確？', options: ['小新RH=90%', '妮妮RH=50%', '小新水氣壓8.8hPa', '妮妮水氣壓16hPa', '小新露點10℃'], correctIndices: [2], explanation: '小新差1度，查表RH=88%。水氣壓=10*0.88=8.8hPa。' },
          { id: 228, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地科', hasImage: true, question: '[需參考圖片] 四個城市中飽和水氣壓最低的城市為何？', options: ['甲', '乙', '丙', '丁'], correctIndices: [1], explanation: '飽和水氣壓隨溫度降低而降低。乙城市溫度3°C最低。' },
          { id: 229, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地科', hasImage: true, question: '[需參考圖片] 四個城市中何者空氣中水氣含量最高？', options: ['甲', '乙', '丙', '丁'], correctIndices: [3], explanation: '實際水氣含量看露點溫度。丁城市露點26°C最高。' },
          { id: 230, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地科', hasImage: true, question: '[需參考圖片] 四個城市中相對溼度最低的城市相對溼度約為何？', options: ['5%', '24%', '43%', '62%'], correctIndices: [2], explanation: '甲(氣溫25露點10)溫差最大RH最低。估算約40%左右。' },
          { id: 231, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地科', hasImage: true, question: '[需參考圖片] 圖中★(轉形斷層)附近的板塊運動方向，何者正確？', options: ['(A)', '(B)', '(C)', '(D) 上方右移，下方左移'], correctIndices: [3], explanation: '轉形斷層北側為中洋脊東翼(向東)，南側為西翼(向西)。' },
          { id: 232, type: 'single', grade: 1, semester: 1, exam: 2, subject: '地科', hasImage: true, question: '[需參考圖片] 有關此地磁紀錄的敘述何者正確？', options: ['內地核流動造成磁場倒轉', '黑色岩漿生成時自北向下看...', '條狀磁力異常因地函物質受當時地磁影響而紀錄', 'AC段地震較頻繁'], correctIndices: [2], explanation: '岩漿冷卻時會記錄當時的地磁方向(古地磁)。' },
          { id: 233, type: 'multiple', grade: 1, semester: 1, exam: 2, subject: '地科', hasImage: true, question: '[需參考圖片] 中洋脊與轉形斷層圖示，何者正確？(應選3項)', options: ['圖一含兩種板塊邊界', '圖一有右移型轉形斷層', '圖二是左移型轉形斷層', '淺源地震均勻分布在PQ', 'QR段有許多火山'], correctIndices: [0, 1, 2], explanation: '圖一含張裂與錯動邊界(A)。錯動方向為右移(B)。圖二為左移(C)。PQ為破裂帶少地震。QR為轉形斷層無火山。' },
          { id: 234, type: 'multiple', grade: 1, semester: 1, exam: 2, subject: '地科', hasImage: true, question: '[需參考圖片] 氣壓隨高度變化，何者正確？(應選2項)', options: ['氣壓每公里降6.5hPa', '5km以下每10m降1hPa', '地表越暖氣壓遞減率越小', '地表越冷氣壓遞減率越小', '離地越遠遞減率越大'], correctIndices: [1, 2], explanation: '近地表每10m降1hPa(B)。暖空氣密度小，氣壓隨高度下降慢(C)。' },
          { id: 235, type: 'multiple', grade: 1, semester: 1, exam: 2, subject: '地科', hasImage: true, question: '[需參考圖片] 大氣氣溫高度圖，敘述何者正確？(應選2項)', options: ['最高峰在甲層', '乙層主要為臭氧', '內層層頂溫度最低(註:應指丙層頂)', '丁層氣體成游離態', '丁層因臭氧吸紫而升溫'], correctIndices: [2, 3], explanation: '中氣層頂(丙層頂)溫度最低(C)。增溫層(丁)氣體游離(D)。' },

          // --- 生物 (301-327) ---
          { id: 301, type: 'single', grade: 1, semester: 1, exam: 2, subject: '生物', question: '關於紅血球的演化優勢與特性，下列敘述何者較為正確?', options: ['紅血球的細胞膜具有專門運輸氧氣的蛋白質', '細胞核是生命中樞，紅血球因無法製造結構蛋白質，所以壽命不長', '紅血球之粒線體可執行有氧呼吸，是能量工廠', '原核細胞也跟紅血球一樣不具核糖體'], correctIndices: [1], explanation: '(B)正確。紅血球無細胞核，無法轉錄mRNA製造蛋白質修復，壽命短。(A)氧氣擴散通過。(C)無粒線體。(D)原核有核糖體。' },
          { id: 302, type: 'single', grade: 1, semester: 1, exam: 2, subject: '生物', question: '在酵素反應過程中，若增加受質濃度，能克服下列何種障礙，使反應順利進行?', options: ['輔酶不足', '異位抑制作用', '競爭抑制作用', '酵素活性飽合'], correctIndices: [2], explanation: '競爭性抑制劑與受質競爭活性位。大幅增加受質濃度可降低抑制劑結合機率，克服抑制。' },
          { id: 303, type: 'single', grade: 1, semester: 1, exam: 2, subject: '生物', hasImage: true, question: '[需參考圖片] 下表為真核細胞中數種生物膜佔總生物膜的比率，推測甲~丁最可能為哪些部位?\n數據：粗糙內質網27%, 丙19.7%, 乙7.3%, 丁7.2%, 甲4.2%', options: ['甲:葉外, 乙:粒外, 丙:葉內, 丁:粒內', '甲:葉內, 乙:粒外, 丙:粒內, 丁:葉外', '甲:粒內, 乙:葉外, 丙:粒外, 丁:葉內', '甲:粒外, 乙:葉外, 丙:粒內, 丁:葉內'], correctIndices: [3], explanation: '粒線體內膜(丙)面積遠大於外膜(甲)。葉綠體內外膜(乙、丁)面積相近。符合比例者為(D)。' },
          { id: 304, type: 'single', grade: 1, semester: 1, exam: 2, subject: '生物', question: '人類肉眼解像力約0.1mm，使用1000倍光學顯微鏡觀察，下列何者在視野下看不見?', options: ['10⁻⁶ m (1μm)', '10⁻⁵ mm (10nm)', '10⁻⁷ cm (1nm)', '10¹ nm (10nm)'], correctIndices: [3], explanation: '光學顯微鏡解析度極限約200nm。選項B,C,D皆遠小於極限，無法看見。依題目設計選最不可能的(D)病毒大小等級。' },
          { id: 305, type: 'single', grade: 1, semester: 1, exam: 2, subject: '生物', question: '下列有關粒線體的敘述，何者正確?', options: ['具有棒狀染色體', '基因突變會造成性聯遺傳疾病', '可合成粒線體所有的蛋白質', '對許多殺細菌的抗生素敏感'], correctIndices: [3], explanation: '粒線體源自細菌(內共生)，核糖體似細菌，故對抗生素敏感。(A)環狀DNA。(B)母系遺傳。(C)僅合成部分蛋白。' },
          { id: 306, type: 'single', grade: 1, semester: 1, exam: 2, subject: '生物', question: '下列關於細胞的敘述，何者正確?', options: ['膜蛋白均勻分布在膜上', '核糖體因組成不同分別位於內質網及細胞質', '雄性激素經高基氏體修飾後分泌', '細胞核內、外膜上有許多與物質運輸相關的蛋白質(核孔)'], correctIndices: [3], explanation: '核孔複合體位於核膜，負責物質運輸。' },
          { id: 307, type: 'single', grade: 1, semester: 1, exam: 2, subject: '生物', hasImage: true, question: '[需參考圖片] 分解H₂O₂實驗：第2組反應速率較快，但最終產物量與第1組相同。第2組改變了什麼?', options: ['酵素濃度', 'H₂O₂濃度', '反應溫度', '反應環境pH值'], correctIndices: [0], explanation: '產物總量不變代表受質沒變。速率變快可能是酵素增加。' },
          { id: 308, type: 'single', grade: 1, semester: 1, exam: 2, subject: '生物', question: '下列物質進入細胞的方法，哪些正確?', options: ['牛奶以滲透作用進入根細胞', '碘離子以主動運輸進入海帶細胞', '酒精經主動運輸進入腦細胞', '肺泡氣體交換藉主動運輸'], correctIndices: [1], explanation: '海帶細胞碘濃度高於海水，需主動運輸累積。(C)(D)為擴散。' },
          { id: 309, type: 'single', grade: 1, semester: 1, exam: 2, subject: '生物', question: '細胞代謝作用包含同化與異化，比較何者正確?', options: ['同化:加水, 異化:脫水', '同化:釋能, 異化:耗能', '同化:大變小, 異化:小變大', '兩者常伴隨發生(偶聯反應)'], correctIndices: [3], explanation: '細胞常利用異化作用釋放的能量來驅動同化作用。' },
          { id: 310, type: 'single', grade: 1, semester: 1, exam: 2, subject: '生物', hasImage: true, question: '[需參考圖片] 剔除酵素甲基因不同區域(①~⑤)後測活性。甲(全有)高活性, 乙(缺1,3)高活性, 丙(缺3,5)中活性, 丁(缺1,4)低活性。推論?', options: ['甲活性不因pH影響', '酵素丙無法結合受質', '提供丁更多受質活性可持續上升', '對於酵素活性而言，區域5的重要性較低'], correctIndices: [3], explanation: '區域4缺失(丁)導致活性喪失，4最重要。區域5缺失(丙)活性尚可，區域1,3缺失(乙)活性高。故5的重要性低於4。' },
          { id: 311, type: 'single', grade: 1, semester: 1, exam: 2, subject: '生物', question: '痛痛病主因鎘中毒，鎘造成的影響為何?', options: ['是輔因子，增強酶活性', '是酶抑制物，降低酶活性', '是催化劑，降低活化能', '是反應物，抑制磷酸酶'], correctIndices: [1], explanation: '重金屬通常為酵素抑制劑(不可逆或非競爭)。' },
          { id: 312, type: 'single', grade: 1, semester: 1, exam: 2, subject: '生物', question: '關於真核細胞構造與機能，何者正確?', options: ['粒線體和葉綠體皆與能量轉換有關', '核糖體和內質網皆與物質運輸有關', '核仁及核質皆與製造核糖體有關', '高基氏體及液泡皆與細胞分泌有關'], correctIndices: [0], explanation: '粒線體(呼吸)與葉綠體(光合)皆負責能量轉換。' },
          { id: 313, type: 'single', grade: 1, semester: 1, exam: 2, subject: '生物', question: '植物細胞壁的中膠層可在哪裡找到?', options: ['初生細胞壁和初生細胞壁之間', '初生細胞壁和次生細胞壁之間', '次生細胞壁和次生細胞壁之間', '細胞壁和細胞膜之間'], correctIndices: [0], explanation: '中膠層位於兩相鄰細胞的初生細胞壁之間，黏合細胞。' },
          { id: 314, type: 'single', grade: 1, semester: 1, exam: 2, subject: '生物', hasImage: true, question: '[需參考圖片] 胃幽門螺旋菌可產生毒素造成胃潰瘍，敘述何者正確?', options: ['此細菌能在pH2的環境中存活', '由高基氏體分泌毒性蛋白質', '細胞核內可發現DNA', '在35~40℃的活性較差'], correctIndices: [0], explanation: '胃液pH約2，該菌能在此生存。(B)(C)細菌無胞器與核。(D)人體寄生菌適溫約37度。' },
          { id: 315, type: 'single', grade: 1, semester: 1, exam: 2, subject: '生物', question: '細胞不能無限大的主要原因?', options: ['會把細胞膜撐破', '不利於分裂', '擠壓造成破裂', '表面積與體積比變小，吸收能力不足以維持生命'], correctIndices: [3], explanation: '體積變大，SA/V比值變小，物質交換效率降低，限制細胞大小。' },
          { id: 316, type: 'single', grade: 1, semester: 1, exam: 2, subject: '生物', question: '下列何者同時具有DNA、RNA、蛋白質及磷脂質?', options: ['葉綠體', '核糖體', '中心粒', '核仁'], correctIndices: [0], explanation: '需有膜(磷脂)、遺傳物質(DNA)及表現系統。葉綠體符合。' },
          { id: 317, type: 'single', grade: 1, semester: 1, exam: 2, subject: '生物', hasImage: true, question: '[需參考圖片] 放射性追蹤酵素合成過程：甲(始高)→乙(中高)→丙(後高)。甲乙丙對應構造?', options: ['平滑ER→高基→溶體', '核→粗糙ER→高基', '粗糙ER→高基→平滑ER', '粗糙內質網→高基氏體→分泌囊泡'], correctIndices: [3], explanation: '分泌蛋白路徑：粗糙內質網(合成) → 高基氏體(修飾) → 囊泡(分泌)。' },
          { id: 318, type: 'single', grade: 1, semester: 1, exam: 2, subject: '生物', question: '承上題，此酵素適合的作用環境與特性?', options: ['適合在鹼性環境作用', '不具專一性水解酶', '能分解過氧化氫', '參與胞內消化'], correctIndices: [0], explanation: '分泌性消化酵素(如胰液酵素)多在小腸作用，環境為鹼性。' },
          { id: 319, type: 'multiple', grade: 1, semester: 1, exam: 2, subject: '生物', hasImage: true, question: '[需參考圖片] 動物細胞圖(甲核,乙粗ER,丙滑ER,丁粒,戊高,己中心粒)。哪些構造內可能具有完整核糖體?(多選)', options: ['甲', '乙', '丙', '戊', '己'], correctIndices: [1], explanation: '粗糙內質網(乙)表面有核糖體。(甲核內僅次單元, 丙無, 戊無, 己無)。' },
          { id: 320, type: 'multiple', grade: 1, semester: 1, exam: 2, subject: '生物', hasImage: true, question: '[需參考圖片] 承上圖，標定合成胰島素(分泌蛋白)原料，放射性出現在哪些胞器?(多選)', options: ['甲', '乙', '丙', '戊', '己'], correctIndices: [1, 3], explanation: '分泌蛋白路徑：核糖體 → 粗糙內質網(乙) → 高基氏體(戊)。' },
          { id: 321, type: 'multiple', grade: 1, semester: 1, exam: 2, subject: '生物', question: '青黴素抑制肽聚糖合成，影響哪些生物生長?(多選)', options: ['大腸桿菌', '釀酒酵母菌', '金黃色葡萄球菌', '比菲德氏菌', '甲烷菌'], correctIndices: [0, 2, 3], explanation: '肽聚糖是真細菌細胞壁成分。(A)(C)(D)為細菌。(B)真菌。(E)古菌(無肽聚糖)。' },
          { id: 322, type: 'multiple', grade: 1, semester: 1, exam: 2, subject: '生物', question: '關於細菌細胞壁，何者正確?(多選)', options: ['原核生物成分都相同', '功能與植物細胞壁相似(保護支持)', '可作分類依據(革蘭氏)', '防止低張環境爆裂', '協助控制小分子進出'], correctIndices: [1, 2, 3], explanation: '(A)古菌不同。(E)全透性，細胞膜才控制進出。' },
          { id: 323, type: 'multiple', grade: 1, semester: 1, exam: 2, subject: '生物', question: '溶體與過氧化體比較，哪些正確?(多選)', options: ['溶體含水解酶分解老化胞器', '過氧化體分解H₂O₂', '過氧化體結合食泡消化', '兩者可互相轉換', '溶體內部為酸性'], correctIndices: [0, 1, 4], explanation: '結合食泡的是溶體。來源不同不可轉換。' },
          { id: 324, type: 'multiple', grade: 1, semester: 1, exam: 2, subject: '生物', question: '有關細胞構造，哪些正確?(多選)', options: ['染色體由DNA和蛋白質組成', '粗糙內質網製造分泌型蛋白質', '葉綠體將光能轉化為化學能', '中心粒由蛋白質組成，與鞭毛構造相似', '液泡大小在動植物細胞中相似'], correctIndices: [0, 1, 2, 3], explanation: '(E)植物液泡通常很大，動物很小。' },
          { id: 325, type: 'multiple', grade: 1, semester: 1, exam: 2, subject: '生物', hasImage: true, question: '[需參考圖片] 酵素反應能量圖，哪些正確?(多選)', options: ['此反應為放能反應', '甲為葡萄糖，乙為澱粉', '曲線II表示有酶參與', '酶降低的活化能為E3(差值)', '有酶時反應前後能量變化較低'], correctIndices: [0, 2, 3], explanation: '反應物能量高於產物=放能(A)。(B)合成是吸能。(E)反應熱不變。' },
          { id: 326, type: 'multiple', grade: 1, semester: 1, exam: 2, subject: '生物', question: '細胞骨架受損，可能影響哪些?(多選)', options: ['胞器的移動', '蛋白質的合成', '細胞的形狀', '紡錘絲的形成', '分解脂肪酸'], correctIndices: [0, 2, 3], explanation: '骨架負責構造支持、胞內運輸、細胞分裂(紡錘絲)。' },
          { id: 327, type: 'multiple', grade: 1, semester: 1, exam: 2, subject: '生物', question: '酶和輔因子敘述哪些正確?(多選)', options: ['所有酶需輔因子', '輔因子成分和酶相同', '一種輔因子可協助多種酶', '有機輔因子又稱輔酶'], correctIndices: [2, 3], explanation: '(A)部分需要。(B)酶是蛋白，輔因子是非蛋白。' },

          // --- 物理 (401-427) ---
          { id: 401, type: 'single', grade: 1, semester: 1, exam: 2, subject: '物理', question: '下列甲、乙、丙關於物理學發展之敘述，何者屬於演繹式之推導？\n甲：克卜勒透過天文數據推論行星定律。\n乙：庫侖實驗發現靜電力定律。\n丙：牛頓透過運動定律與引力定律解釋克卜勒定律。', options: ['只有甲乙', '只有乙丙', '只有甲', '只有丙', '甲乙丙'], correctIndices: [3], explanation: '甲、乙為歸納法(數據→通則)；丙為演繹法(已知定律→推導結論)。' },
          { id: 402, type: 'single', grade: 1, semester: 1, exam: 2, subject: '物理', question: '針對「地心說」、「日心說」和「克卜勒行星運動定律」的敘述，何者錯誤？', options: ['日心說與地心說皆假設軌道為圓形', '日心說能簡單描述逆行', '克卜勒第一定律建構在地心說基礎上', '克卜勒修正了圓形軌道為橢圓', '橢圓越接近正圓，速率越接近等速率'], correctIndices: [2], explanation: '克卜勒支持日心說，並利用第谷數據修正了圓形軌道假設。' },
          { id: 403, type: 'single', grade: 1, semester: 1, exam: 2, subject: '物理', question: '下列有關光譜的敘述，何者錯誤？', options: ['白熾燈泡發出連續光譜', '低溫氣體吸收能量產生暗線', '原子在適當條件下能發射或吸收光譜', '電子躍遷回低能階發出明線(發射光譜)', '電子躍遷回低能階發出連續光譜'], correctIndices: [4], explanation: '原子能階量子化，躍遷釋放特定能量，產生明線(不連續)光譜。' },
          { id: 404, type: 'single', grade: 1, semester: 1, exam: 2, subject: '物理', hasImage: true, question: '[需參考圖片] 圖1為兩金屬 A、B 的光電效應。截距比 a:b = 1:4，則截止波長比 λa : λb 為何？', options: ['2:1', '1:2', '4:1', '1:4', '1:1'], correctIndices: [2], explanation: '截距為頻率 f₀。λ₀ = c/f₀，波長與頻率成反比。f₀比 1:4 -> λ₀比 4:1。' },
          { id: 405, type: 'single', grade: 1, semester: 1, exam: 2, subject: '物理', hasImage: true, question: '[需參考圖片] 行星繞日橢圓軌道如圖2。S為焦點。下列敘述何者正確？', options: ['C→A→B 時間 < B→D→C 時間', 'A→B→D 時間 < D→C→A 時間', 'B點引力方向與C點相同', 'A點加速度最小', 'B點與A點之(速度x距離)相等'], correctIndices: [1], explanation: '依等面積定律，路徑A-B-D掃過面積較小(遠日點端)，故時間較短。' },
          { id: 406, type: 'single', grade: 1, semester: 1, exam: 2, subject: '物理', hasImage: true, question: '[需參考圖片] 圖3光電效應示意圖。哪兩項情境不符合物理機制？\n甲:紅光無電子\n乙:綠光(1光子)出1電子\n丙:紫光(1光子)出2電子\n丁:紅光(2光子)出1電子', options: ['甲乙', '甲丙', '乙丙', '乙丁', '丙丁'], correctIndices: [4], explanation: '丙錯：一光子只能打出一電子。丁錯：頻率不足(紅光)無法產生光電效應，與光子數無關。' },
          { id: 407, type: 'single', grade: 1, semester: 1, exam: 2, subject: '物理', question: '承上題，乙光恰可打出電子。若丙光波長為乙光的0.6倍，則丙光打出的電子動能為何？', options: ['5hλ/3', '3hλ/2c', '4h/3λ', '2hc/3λ', '2hc/5h'], correctIndices: [3], explanation: 'W = hc/λ。E\' = hc/(0.6λ) = 5hc/3λ。Ek = E\' - W = 2hc/3λ。' },
          { id: 408, type: 'single', grade: 1, semester: 1, exam: 2, subject: '物理', question: '關於物質波，下列敘述何者錯誤？', options: ['動能越大粒子性越明顯(波長短)', '波長相同表示具有相同速度', '光子動量 P=hf/c', '干涉條紋寬度相同表動量相同', '日常物體波動性不明顯'], correctIndices: [1], explanation: '波長 λ = h/p = h/mv。波長相同僅代表動量 p 相同，若質量不同則速度不同。' },
          { id: 409, type: 'single', grade: 1, semester: 1, exam: 2, subject: '物理', hasImage: true, question: '[需參考圖片] 氫原子能階躍遷：A(3→2), B(4→2), C(5→2), D(6→2)。下列何者正確？', options: ['波長 λA > λB > λC > λD', '頻率 fA > fB > fC > fD', '能量 EA > EB > EC > ED', '1/λA = 1/λB + ...', '1/fA = 1/fB + ...'], correctIndices: [0], explanation: '能階差越小，能量越小，頻率越低，波長越長。A的能階差最小，故波長最長。' },
          { id: 410, type: 'single', grade: 1, semester: 1, exam: 2, subject: '物理', question: '耳溫槍利用熱輻射測溫。308.1K測得9404.5nm；310.1K測得9343.9nm。下列何者正確？', options: ['測得電磁波為紫外光', '若測得9353nm，則未達38℃(約311K)', '溫度越高頻率越低', '測得9300nm對應300K', '波長與絕對溫度成正比'], correctIndices: [1], explanation: '維恩位移定律：波長與溫度成反比。9353nm > 9343.9nm，故溫度 < 310.1K，未達發燒。' },
          { id: 411, type: 'multiple', grade: 1, semester: 1, exam: 2, subject: '物理', hasImage: true, question: '[需參考圖片] 彗星繞日(圖5)。A→B位移+y(1AU), C→D位移-x(1AU)。下列哪些正確？(應選2項)', options: ['C→D掃過面積約3.0 AU²', 'C→D掃過面積約5.0 AU²', 't1/t2 ≈ 1.0', 't1/t2 ≈ 2.0', 't1/t2 ≈ 3.0'], correctIndices: [0, 4], explanation: '依圖判讀半長軸a=6。C-D近短軸，面積≈0.5*6*1=3。A為遠日點(r=9)，面積≈4.5。若比較遠/近點時間比應為(E)3.0。' },
          { id: 412, type: 'multiple', grade: 1, semester: 1, exam: 2, subject: '物理', hasImage: true, question: '[需參考圖片] 衛星繞地橢圓軌道(圖6)。F為地心。哪些正確？(應選3項)', options: ['A點加速度與瞬時速度垂直', 'C點速率最大', '受引力作用作變加速運動，指向地心', 'F點為焦點', 'B→D時間 = D→B時間'], correctIndices: [0, 2, 3], explanation: 'A為長軸端點，速度垂直引力(加速度)。C為遠地點速率最小。地球在焦點F。' },
          { id: 413, type: 'multiple', grade: 1, semester: 1, exam: 2, subject: '物理', hasImage: true, question: '[需參考圖片] 光電效應 Ek-f 關係圖(圖7)。哪些正確？', options: ['關係為一直線，斜率為 h', '甲乙丙曲線均可能出現', '乙金屬需較長時間照射', '曲線與縱軸交點為底限頻率', '甲功函數小於乙'], correctIndices: [0], explanation: 'Ek = hf - W，斜率為h(普朗克常數)。其他選項圖形特徵不符或觀念錯誤。' },
          { id: 414, type: 'multiple', grade: 1, semester: 1, exam: 2, subject: '物理', question: '有關光電效應敘述，哪些正確？(應選3項)', options: ['光子能量由頻率決定', '同頻率下，逸出電子數與光強有關', '電子動能只與頻率有關', '頻率越大，電子動能增加', '底限頻率與金屬材料無關'], correctIndices: [0, 1, 3], explanation: '動能亦與功函數(材料)有關。底限頻率與材料有關。' },
          { id: 415, type: 'multiple', grade: 1, semester: 1, exam: 2, subject: '物理', question: '波耳原子模型與光譜敘述，哪些正確？', options: ['電子在特定定態軌道運動', '高能階躍遷至低能階釋出光子能量=能階差', '高躍遷至低是吸收光子', '恆星溫度與波長成正比', '光譜無法判別原子種類'], correctIndices: [0, 1], explanation: '躍遷釋放光子。溫度與波長反比。光譜可判別原子。' },
          { id: 416, type: 'multiple', grade: 1, semester: 1, exam: 2, subject: '物理', question: '量子現象發展史，哪些正確？(全選)', options: ['普朗克與愛因斯坦f皆指頻率', '愛因斯坦因光電效應獲獎', '物質波動即物質波', '普朗克解釋黑體輻射', '物質波解釋原子軌域'], correctIndices: [0, 1, 2, 3, 4], explanation: '敘述皆正確。' },
          { id: 417, type: 'multiple', grade: 1, semester: 1, exam: 2, subject: '物理', question: '波耳氫原子理論敘述，哪些「錯誤」？', options: ['電子在定態軌道運動', '高能階躍遷低能階釋出電磁波', '能階為連續的', '電子可自發由低能階躍遷高能階', 'n=1稱為基態'], correctIndices: [2, 3], explanation: '能階不連續(量子化)。低躍遷高需吸收能量(非自發)。' },
          { id: 418, type: 'single', grade: 1, semester: 1, exam: 2, subject: '物理', hasImage: true, question: '[需參考圖片] 關於原子光譜見解：\n甲:可辨識原子種類\n乙:是物質顏色主因\n丙:證明能階不連續\n何者正確？', options: ['僅甲', '僅乙', '僅丙', '甲丙', '乙丙'], correctIndices: [3], explanation: '光譜如指紋(甲)，且證明能量量子化(丙)。' },
          { id: 419, type: 'single', grade: 1, semester: 1, exam: 2, subject: '物理', question: '利用波耳模型概念，解釋原子為何會有特定光譜線？', options: ['電子在任意軌道運行', '電子在不連續能階躍遷，釋放特定能量光子', '原子核分裂釋放能量', '電子撞擊原子核產生光'], correctIndices: [1], explanation: '能階不連續 -> 能量差特定 -> 光子頻率特定 -> 特定譜線。' },
          { id: 420, type: 'single', grade: 1, semester: 1, exam: 2, subject: '物理', question: '質量10g子彈速度500m/s，物質波波長為何？', options: ['1.326 x 10⁻³⁴ m', '1.326 x 10⁻³⁰ m', '6.63 x 10⁻³⁴ m', '無法計算'], correctIndices: [0], explanation: 'λ = h/mv = 6.63e-34 / (0.01 * 500) ≈ 1.326e-34 m。' },
          { id: 421, type: 'single', grade: 1, semester: 1, exam: 2, subject: '物理', question: '為何生活中之物質波不易觀察？', options: ['波長太長', '波長極短遠小於障礙物縫隙', '物體速度太慢', '普朗克常數太大'], correctIndices: [1], explanation: '宏觀物體動量大，波長極短，遠小於環境縫隙，無繞射/干涉現象。' },
          { id: 422, type: 'single', grade: 1, semester: 1, exam: 2, subject: '物理', question: '何謂黑體？', options: ['黑色的物體', '完全反射輻射的物體', '完全吸收不反射的理想物體', '溫度極低的物體'], correctIndices: [2], explanation: '黑體定義為能完全吸收所有入射輻射的理想物體。' },
          { id: 423, type: 'single', grade: 1, semester: 1, exam: 2, subject: '物理', question: '關於黑體輻射光譜隨溫度變化的敘述，何者正確？', options: ['溫度越高，峰值波長越長', '溫度越高，總輻射能量越低', '溫度越高，峰值波長越短(左移)', '波長與溫度無關'], correctIndices: [2], explanation: '維恩位移定律：溫度升高，輻射最強處波長變短。' },
          { id: 424, type: 'single', grade: 1, semester: 1, exam: 2, subject: '物理', question: '關於光電效應，下列何者是愛因斯坦的解釋而非古典理論？', options: ['光是能量連續的波動', '能量需時間累積', '光是粒子(光子)，E=hf', '動能隨光強增加'], correctIndices: [2], explanation: '愛因斯坦提出光量子論，能量不連續(粒子性)。' },
          { id: 425, type: 'single', grade: 1, semester: 1, exam: 2, subject: '物理', hasImage: true, question: '[需參考圖片] 利用密立根實驗數據圖(V-f圖)算出 h/e 比值約為？', options: ['4.1 x 10⁻¹⁵', '6.6 x 10⁻³⁴', '1.6 x 10⁻¹⁹', '3.0 x 10⁸'], correctIndices: [0], explanation: '斜率 = h/e。計算約為 4.1e-15 V-s。' },
          { id: 426, type: 'single', grade: 1, semester: 1, exam: 2, subject: '物理', hasImage: true, question: '[需參考圖片] 獵風者號距地600km(R=6400km)。繞地球一周所需時間？', options: ['86400', '5250', '4000', '1000', '600'], correctIndices: [1], explanation: '利用克卜勒第三定律或圓周運動公式估算，約5250秒。' },
          { id: 427, type: 'single', grade: 1, semester: 1, exam: 2, subject: '物理', question: '牛頓利用萬有引力與運動定律，演繹出衛星加速度與距離的關係為何？', options: ['a ∝ M/r²', 'a ∝ r/T²', 'a ∝ v²', 'a ∝ 1/r'], correctIndices: [0], explanation: 'a = GM/r²。' },

          // --- 數學 (501-518) ---
          { id: 501, type: 'single', grade: 1, semester: 1, exam: 2, subject: '數學', hasImage: true, question: '[需參考圖片] 如附圖，L1~L4 為四條直線，斜率分別為 m1~m4。試比較其大小。', options: ['m1 > m2 > m3 > m4', 'm1 > m2 > m4 > m3', 'm2 > m1 > m3 > m4', 'm4 > m3 > m2 > m1'], correctIndices: [0], explanation: 'L1, L2 由左下往右上(斜率正)，L1較陡峭故 m1>m2。L3, L4 由左上往右下(斜率負)，L3較平緩(接近0)故 m3>m4。' },
          { id: 502, type: 'single', grade: 1, semester: 1, exam: 2, subject: '數學', question: '設直線 L: x+2y-5=0。求：(1)通過(1,1)且平行L (2)通過(-3,-1)且垂直L 的直線方程式。', options: ['(1)x+2y-3=0 (2)2x-y+5=0', '(1)x+2y+3=0 (2)2x-y-5=0', '(1)2x-y-1=0 (2)x+2y+5=0', '(1)x-2y+1=0 (2)2x+y+7=0'], correctIndices: [0], explanation: '(1)平行設x+2y=k，代(1,1)得k=3。(2)垂直設2x-y=k，代(-3,-1)得k=-5。' },
          { id: 503, type: 'single', grade: 1, semester: 1, exam: 2, subject: '數學', question: 'P(3,4) 到直線 L: 2x+3y-5=0 的 (1)投影點坐標 與 (2)距離？', options: ['(1,1), √13', '(1,1), 13', '(2,1), √13', '(1,2), 2√13'], correctIndices: [0], explanation: '垂直線3x-2y=1與L聯立得投影點(1,1)。距離公式 d = |6+12-5|/√13 = √13。' },
          { id: 504, type: 'single', grade: 1, semester: 1, exam: 2, subject: '數學', question: '直線 L 垂直 2x-y=3 且與兩軸圍成三角形面積為 4，求 L 方程式。', options: ['x+2y=±4', 'x+2y=±8', '2x-y=±4', '2x-y=±8'], correctIndices: [0], explanation: 'L斜率-1/2，設x+2y=k。截距k, k/2。面積|k^2/4|/2=4 -> k^2=16 -> k=±4。' },
          { id: 505, type: 'single', grade: 1, semester: 1, exam: 2, subject: '數學', question: '求圓心(4,3)且通過(0,2)的圓方程式。', options: ['(x-4)²+(y-3)²=17', '(x-4)²+(y-3)²=16', '(x-4)²+(y-3)²=25', '(x-3)²+(y-4)²=17'], correctIndices: [0], explanation: '半徑 r = √((4-0)²+(3-2)²) = √17。' },
          { id: 506, type: 'single', grade: 1, semester: 1, exam: 2, subject: '數學', question: '圓 C: (x-2)²+(y+3)²=25，求過圓上點 A(5,1) 的切線方程式。', options: ['3x+4y-19=0', '4x-3y-17=0', '3x+4y+19=0', '4x+3y-23=0'], correctIndices: [0], explanation: '圓心(2,-3)，半徑斜率4/3。切線斜率-3/4，過(5,1)。y-1=-3/4(x-5) -> 3x+4y-19=0。' },
          { id: 507, type: 'single', grade: 1, semester: 1, exam: 2, subject: '數學', question: '圓 C: x²+y²-2x+4y-11=0 與直線 L: 4x+3y+7=0 相割，求割線段長。', options: ['2√15', '√15', '4', '8'], correctIndices: [0], explanation: '圓心(1,-2)半徑4。圓心到L距離d=1。弦長=2√(16-1)=2√15。' },
          { id: 508, type: 'single', grade: 1, semester: 1, exam: 2, subject: '數學', question: '點 A(4,7) 上光源將圓 (x-2)²+(y-3)²=2 投射到 x 軸上的影長為何？', options: ['6', '8', '4', '10'], correctIndices: [0], explanation: '求過A之兩切線在x軸截距差。切線斜率m=1, 7。截距分別為-3, 3。影長6。' },
          { id: 509, type: 'single', grade: 1, semester: 1, exam: 2, subject: '數學', question: '一圓過 A(1,2), B(3,4) 且被 x 軸截長 6，求此圓方程式。', options: ['(x-4)²+(y-1)²=10 或 (x+6)²+(y-11)²=130', '(x-4)²+(y-1)²=100', '僅 (x+6)²+(y-11)²=130', '(x-1)²+(y-2)²=10'], correctIndices: [0], explanation: '圓心在x+y=5上。設(t, 5-t)。利用半徑與弦心距關係解得t=4或-6。' },
          { id: 510, type: 'single', grade: 1, semester: 1, exam: 2, subject: '數學', hasImage: true, question: '[需參考圖片] 質點P通過A(-4,3)穿越 x+y+k=0，在B點轉向90度，到C點穿越另一邊界。求 C 與 B 坐標？', options: ['C(2,3), B(-1,0)', 'C(3,2), B(0,-1)', 'C(2,3), B(0,-1)', 'C(3,3), B(-1,0)'], correctIndices: [0], explanation: '直線L: x+y+1=0。B為L與x=-1交點(-1,0)。轉向後斜率1過B，交x=2於C(2,3)。' },
          { id: 511, type: 'single', grade: 1, semester: 1, exam: 2, subject: '數學', hasImage: true, question: '[需參考圖片] 圓 x²+y²+2x-2y+1=0 與 y=|2x+1| 的圖形有幾個交點？', options: ['4個', '3個', '2個', '0個'], correctIndices: [0], explanation: '圓心(-1,1)半徑1。折線兩側直線分別距離圓心2/√5(割)及0(過圓心，割)。共4交點。' },
          { id: 512, type: 'single', grade: 1, semester: 1, exam: 2, subject: '數學', question: '單位圓上除 A(1,0) 外，還有幾個點到直線 y=2x 的距離等於 A 到 L 的距離？', options: ['3個', '2個', '1個', '4個'], correctIndices: [0], explanation: 'A到L距離d < r。兩側平行線皆割圓。一側過A(交2點扣A剩1)，另一側交2點。共3點。' },
          { id: 513, type: 'single', grade: 1, semester: 1, exam: 2, subject: '數學', question: 'AB=7，A為圓心半徑r，過B作切線切點P。當r變動時，△PAB面積最大值為何？', options: ['49/4', '49/2', '7', '14'], correctIndices: [0], explanation: '面積 = 0.5 * r * √(49-r²)。當 r = √(49/2) 時面積最大為 49/4。' },
          { id: 514, type: 'single', grade: 1, semester: 1, exam: 2, subject: '數學', question: '圓落在 x-y≤6, x+y≤18, x-y≥-4, x+y≥-24 圍成區域內。圓最大可能面積？', options: ['25π/2', '25π', '50π', '12.5π'], correctIndices: [0], explanation: '區域為矩形，短邊距離為 5√2。最大直徑 5√2，半徑 2.5√2。面積 12.5π (25π/2)。' },
          { id: 515, type: 'single', grade: 1, semester: 1, exam: 2, subject: '數學', hasImage: true, question: '[需參考圖片] 正方形紙張，將左下角 O(0,0) 摺至 P(6,8)。摺進去的三角形面積為何？', options: ['625/24', '25', '600/23', '30'], correctIndices: [0], explanation: '摺痕為OP中垂線 3x+4y=25。截距 25/3, 25/4。面積 = 0.5 * (25/3) * (25/4) = 625/24。' },
          { id: 516, type: 'single', grade: 1, semester: 1, exam: 2, subject: '數學', hasImage: true, question: '[需參考圖片] 道館B(盟約永固)位於(10,2)，範圍半徑3單位。試寫出能碰到道館的範圍不等式。', options: ['(x-10)²+(y-2)² ≤ 9', '(x-10)²+(y-2)² ≤ 3', '(x-10)²+(y-2)² ≥ 9', '(x-2)²+(y-10)² ≤ 9'], correctIndices: [0], explanation: '圓心(10,2)，半徑3，圓內區域。' },
          { id: 517, type: 'single', grade: 1, semester: 1, exam: 2, subject: '數學', hasImage: true, question: '[需參考圖片] 承上題，哪些班級(教室在x軸上)能碰到道館B？\n班級坐標：C306(2,0)...C211(8,0), C311(9,0)', options: ['C211, C311', '僅 C311', 'C111, C211, C311', '都沒有'], correctIndices: [0], explanation: '代入不等式：(x-10)²+(0-2)² ≤ 9 -> (x-10)² ≤ 5。7.77 ≤ x ≤ 12.23。C211(8)與C311(9)符合。' },
          { id: 518, type: 'single', grade: 1, semester: 1, exam: 2, subject: '數學', hasImage: true, question: '[需參考圖片] 若碰觸半徑增為7單位，哪些班級能「同時」碰到道館A(0,3)與道館B(10,2)？', options: ['C308(4,0), C309(5,0)', 'C307, C308', 'C309, C111', 'C211, C311'], correctIndices: [0], explanation: '同時滿足A: x²+(0-3)²≤49 (|x|≤6.3) 與 B: (x-10)²+(0-2)²≤49 (3.3≤x≤16.7)。交集 3.3≤x≤6.3。符合者為 C308(4), C309(5)。' }
        ];

        const SUBJECT_CONFIG = {
          '化學': { icon: Icons.FlaskConical, color: 'bg-purple-100 text-purple-600 border-purple-200' },
          '地科': { icon: Icons.Globe, color: 'bg-blue-100 text-blue-600 border-blue-200' },
          '地理': { icon: Icons.Mountain, color: 'bg-emerald-100 text-emerald-600 border-emerald-200' },
          '數學': { icon: Icons.Calculator, color: 'bg-red-100 text-red-600 border-red-200' },
          '物理': { icon: Icons.Zap, color: 'bg-yellow-100 text-yellow-600 border-yellow-200' },
          '生物': { icon: Icons.Microscope, color: 'bg-green-100 text-green-600 border-green-200' },
        };

        const App = () => {
          const [step, setStep] = useState('selection');
          const [selection, setSelection] = useState({ grade: 1, semester: 1, exam: 2, subject: null });
          const [currentQuestions, setCurrentQuestions] = useState([]);
          const [currentQIndex, setCurrentQIndex] = useState(0);
          const [selectedOptions, setSelectedOptions] = useState([]); 
          const [isAnswered, setIsAnswered] = useState(false); 
          const [score, setScore] = useState(0);

          const startQuiz = (subject) => {
            const filtered = MOCK_DATABASE.filter(q => 
              q.grade === selection.grade &&
              q.semester === selection.semester &&
              q.exam === selection.exam &&
              q.subject === subject
            );

            if (filtered.length === 0) {
              alert(`目前資料庫中尚無 ${selection.grade}年級 ${selection.semester === 1 ? '上' : '下'}學期 第${selection.exam}次段考 - ${subject} 的題目。`);
              return;
            }

            setSelection({ ...selection, subject });
            setCurrentQuestions(filtered);
            setCurrentQIndex(0);
            setScore(0);
            setIsAnswered(false);
            setSelectedOptions([]);
            setStep('quiz');
          };

          const handleOptionClick = (index, type) => {
            if (isAnswered) return; 

            if (type === 'single') {
              setSelectedOptions([index]);
              setIsAnswered(true);
              
              const currentQ = currentQuestions[currentQIndex];
              if (currentQ.correctIndices.includes(index)) {
                setScore(s => s + 1);
              }
            } else {
              setSelectedOptions(prev => {
                if (prev.includes(index)) {
                  return prev.filter(i => i !== index);
                } else {
                  return [...prev, index].sort();
                }
              });
            }
          };

          const submitMultipleChoice = () => {
            if (selectedOptions.length === 0) return;
            setIsAnswered(true);

            const currentQ = currentQuestions[currentQIndex];
            const correctSorted = [...currentQ.correctIndices].sort();
            const selectedSorted = [...selectedOptions].sort();
            
            const isCorrect = JSON.stringify(correctSorted) === JSON.stringify(selectedSorted);
            if (isCorrect) {
              setScore(s => s + 1);
            }
          };

          const nextQuestion = () => {
            if (currentQIndex < currentQuestions.length - 1) {
              setCurrentQIndex(prev => prev + 1);
              setIsAnswered(false);
              setSelectedOptions([]);
            } else {
              setStep('result');
            }
          };

          const resetSystem = () => {
            setStep('selection');
            setSelection({ grade: 1, semester: 1, exam: 2, subject: null });
          };

          // Components
          const SelectionScreen = () => (
            <div className="max-w-4xl mx-auto p-6 animate-fade-in">
              <div className="text-center mb-10">
                <h1 className="text-3xl font-bold text-gray-800 mb-2">高中段考題庫中心</h1>
                <p className="text-gray-500">段考題庫 (化學/地理/地科/生物/物理/數學) 若題目需看圖 請點選上方：查看原始PDF選項</p>
              </div>

              <div className="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 mb-8">
                <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">年級</label>
                    <div className="flex space-x-2">
                      {[1, 2, 3].map(g => (
                        <button key={g} onClick={() => setSelection({ ...selection, grade: g })}
                          className={`flex-1 py-2 rounded-lg border ${selection.grade === g ? 'bg-blue-600 text-white border-blue-600' : 'bg-white text-gray-600 hover:bg-gray-50'}`}>
                          {g} 年級
                        </button>
                      ))}
                    </div>
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">學期</label>
                    <div className="flex space-x-2">
                      {[1, 2].map(s => (
                        <button key={s} onClick={() => setSelection({ ...selection, semester: s })}
                          className={`flex-1 py-2 rounded-lg border ${selection.semester === s ? 'bg-blue-600 text-white border-blue-600' : 'bg-white text-gray-600 hover:bg-gray-50'}`}>
                          {s === 1 ? '上學期' : '下學期'}
                        </button>
                      ))}
                    </div>
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">段考別</label>
                    <div className="flex space-x-2">
                      {[1, 2, 3].map(e => (
                        <button key={e} onClick={() => setSelection({ ...selection, exam: e })}
                          className={`flex-1 py-2 rounded-lg border ${selection.exam === e ? 'bg-blue-600 text-white border-blue-600' : 'bg-white text-gray-600 hover:bg-gray-50'}`}>
                          第 {e} 次
                        </button>
                      ))}
                    </div>
                  </div>
                </div>
              </div>

              <div className="grid grid-cols-2 md:grid-cols-3 gap-4">
                {Object.keys(SUBJECT_CONFIG).map((subj) => {
                  const Config = SUBJECT_CONFIG[subj];
                  const IconComp = Config.icon;
                  return (
                    <button key={subj} onClick={() => startQuiz(subj)}
                      className={`p-6 rounded-xl border-2 transition-all hover:shadow-md hover:-translate-y-1 flex flex-col items-center gap-3 ${Config.color}`}>
                      <IconComp size={32} />
                      <span className="font-bold text-lg">{subj}</span>
                    </button>
                  );
                })}
              </div>
            </div>
          );

          const QuizScreen = () => {
            const question = currentQuestions[currentQIndex];
            const progress = ((currentQIndex + 1) / currentQuestions.length) * 100;
            const isMulti = question.type === 'multiple';

            return (
              <div className="max-w-3xl mx-auto p-4 md:p-6 pb-20">
                <div className="flex flex-col md:flex-row items-center justify-between mb-6 gap-4">
                  <button onClick={() => setStep('selection')} className="text-gray-500 hover:text-gray-800 flex items-center gap-1 self-start md:self-auto">
                    <Icons.ArrowLeft size={18} /> 放棄
                  </button>
                  
                  <div className="flex flex-col items-center gap-1">
                     <div className="text-sm font-medium text-gray-500">
                       {selection.grade}年級 {selection.subject} 第{selection.exam}次段考 (Q{currentQIndex + 1}/{currentQuestions.length})
                     </div>
                     <a href={SOURCE_URL} target="_blank" rel="noopener noreferrer" className="flex items-center gap-1 text-xs text-blue-600 hover:underline bg-blue-50 px-2 py-1 rounded-full">
                       <Icons.ExternalLink size={12} /> 查看原始試題 PDF
                     </a>
                  </div>
                  
                  <div className="w-8 hidden md:block"></div>
                </div>

                <div className="w-full bg-gray-200 rounded-full h-2.5 mb-8">
                  <div className="bg-blue-600 h-2.5 rounded-full transition-all duration-300" style={{ width: `${progress}%` }}></div>
                </div>

                <div className="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden relative">
                  <div className="p-6 md:p-8">
                    <div className="flex items-start gap-4 mb-4">
                      <span className={`px-3 py-1 rounded-lg text-sm whitespace-nowrap font-bold ${isMulti ? 'bg-purple-100 text-purple-700' : 'bg-blue-100 text-blue-700'}`}>
                        {isMulti ? '多選題' : '單選題'}
                      </span>
                      <div className="space-y-4 w-full">
                        <h2 className="text-xl font-bold text-gray-800 leading-relaxed whitespace-pre-line">
                          {question.question.replace('[需參考圖片]', '')}
                        </h2>
                        
                        {question.hasImage && (
                          <div className="w-full h-48 bg-gray-100 rounded-xl border-2 border-dashed border-gray-300 flex flex-col items-center justify-center text-gray-400 gap-2">
                            <Icons.Image size={32} />
                            <span className="text-sm">此處為試題圖片顯示區 (請點擊上方連結查看原始 PDF)</span>
                          </div>
                        )}
                      </div>
                    </div>

                    <div className="space-y-3 mt-6">
                      {question.options.map((opt, idx) => {
                        const isSelected = selectedOptions.includes(idx);
                        const isCorrect = question.correctIndices.includes(idx);
                        
                        let btnClass = "w-full text-left p-4 rounded-xl border-2 transition-all duration-200 flex items-center justify-between ";
                        
                        if (!isAnswered) {
                          btnClass += isSelected 
                            ? "border-blue-500 bg-blue-50 text-blue-900 " 
                            : "border-gray-100 hover:border-blue-200 hover:bg-gray-50 ";
                        } else {
                          if (isCorrect) {
                            btnClass += "border-green-500 bg-green-50 text-green-800 ";
                          } else if (isSelected && !isCorrect) {
                            btnClass += "border-red-500 bg-red-50 text-red-800 ";
                          } else {
                            btnClass += "border-gray-100 opacity-50 ";
                          }
                        }

                        return (
                          <button
                            key={idx}
                            onClick={() => handleOptionClick(idx, question.type)}
                            disabled={isAnswered}
                            className={btnClass}
                          >
                            <div className="flex items-center gap-3">
                              <div className={`w-6 h-6 rounded-full border flex items-center justify-center text-xs ${isSelected ? 'bg-blue-600 border-blue-600 text-white' : 'border-gray-300 text-gray-400'}`}>
                                {String.fromCharCode(65 + idx)}
                              </div>
                              <span className="font-medium">{opt}</span>
                            </div>
                            
                            {isAnswered && (
                               <>
                                 {isCorrect && <Icons.CheckCircle className="text-green-600 shrink-0" size={20} />}
                                 {isSelected && !isCorrect && <Icons.XCircle className="text-red-600 shrink-0" size={20} />}
                               </>
                            )}
                          </button>
                        );
                      })}
                    </div>

                    {isMulti && !isAnswered && (
                      <div className="mt-6 flex justify-end">
                        <button 
                          onClick={submitMultipleChoice}
                          disabled={selectedOptions.length === 0}
                          className={`flex items-center gap-2 px-6 py-3 rounded-xl font-bold transition-all ${selectedOptions.length > 0 ? 'bg-blue-600 text-white shadow-lg hover:bg-blue-700' : 'bg-gray-200 text-gray-400 cursor-not-allowed'}`}
                        >
                          <Icons.CheckSquare size={18} /> 確認送出答案
                        </button>
                      </div>
                    )}
                  </div>

                  {isAnswered && (
                    <div className="bg-slate-50 p-6 border-t border-gray-100 animate-slide-up">
                      <div className="flex gap-2 items-center mb-2">
                        <Icons.BookOpen size={18} className="text-blue-600" />
                        <h3 className="font-bold text-gray-800">試題解析</h3>
                      </div>
                      <p className="text-gray-600 leading-relaxed text-sm md:text-base">
                        {question.explanation}
                      </p>
                      
                      <div className="mt-6 flex justify-end">
                        <button onClick={nextQuestion}
                          className="bg-gray-900 text-white px-8 py-3 rounded-xl font-bold hover:bg-black transition-colors shadow-lg">
                          {currentQIndex < currentQuestions.length - 1 ? '下一題 →' : '查看成績'}
                        </button>
                      </div>
                    </div>
                  )}
                </div>
              </div>
            );
          };

          const ResultScreen = () => (
            <div className="max-w-md mx-auto mt-10 p-6 text-center animate-fade-in">
              <div className="bg-white rounded-3xl shadow-xl p-8 border border-gray-100">
                <div className="w-24 h-24 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-6">
                  <Icons.Award size={48} className="text-yellow-600" />
                </div>
                <h2 className="text-2xl font-bold text-gray-800 mb-2">測驗完成</h2>
                <p className="text-gray-500 mb-8">{selection.grade}年級 {selection.subject} 第{selection.exam}次段考</p>
                
                <div className="flex justify-center items-end gap-2 mb-8">
                  <span className="text-7xl font-extrabold text-blue-600">{score}</span>
                  <span className="text-xl text-gray-400 font-medium mb-3">/ {currentQuestions.length} 題</span>
                </div>
                
                <div className="space-y-3">
                  <button onClick={() => startQuiz(selection.subject)}
                    className="w-full flex items-center justify-center gap-2 bg-blue-600 text-white py-3 rounded-xl font-bold hover:bg-blue-700 transition-colors">
                    <Icons.RefreshCw size={18} /> 再測一次
                  </button>
                  <button onClick={resetSystem}
                    className="w-full py-3 text-gray-500 font-medium hover:bg-gray-50 rounded-xl transition-colors">
                    回首頁
                  </button>
                </div>
              </div>
            </div>
          );

          return (
            <div className="min-h-screen bg-slate-50 font-sans text-gray-900">
              {step === 'selection' && <SelectionScreen />}
              {step === 'quiz' && <QuizScreen />}
              {step === 'result' && <ResultScreen />}
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
